function generatePDF(){const e=document.getElementById("form-datos-paciente").cloneNode(!0);e.querySelectorAll("input").forEach(e=>{const t=document.createElement("span");t.textContent=e.value||"",t.style.borderBottom="1px solid #ccc",t.style.padding="2px 6px",t.style.minWidth="80px",t.style.display="inline-block",e.parentNode.replaceChild(t,e)});const t=document.createElement("div");t.style.position="fixed",t.style.left="-9999px",t.appendChild(e),document.body.appendChild(t),html2pdf().set({margin:0,filename:"consentimiento.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:1,scrollY:0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(e).save().then(()=>{document.body.removeChild(t)})}window.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("canvas-firma");if(!e)return;const t=e.getContext("2d");let n=!1;function o(t){const n=e.getBoundingClientRect();return{x:(t.touches?t.touches[0].clientX:t.clientX)-n.left,y:(t.touches?t.touches[0].clientY:t.clientY)-n.top}}e.addEventListener("mousedown",e=>{n=!0;const i=o(e);t.beginPath(),t.moveTo(i.x,i.y)}),e.addEventListener("mousemove",e=>{if(!n)return;const i=o(e);t.lineTo(i.x,i.y),t.stroke()}),e.addEventListener("mouseup",()=>n=!1),e.addEventListener("mouseleave",()=>n=!1),e.addEventListener("touchstart",e=>{n=!0;const i=o(e);t.beginPath(),t.moveTo(i.x,i.y)}),e.addEventListener("touchmove",e=>{if(!n)return;const i=o(e);t.lineTo(i.x,i.y),t.stroke(),e.preventDefault()},{passive:!1}),e.addEventListener("touchend",()=>n=!1),document.getElementById("limpiar-firma").addEventListener("click",function(){t.clearRect(0,0,e.width,e.height)})});